#!/bin/sh

set -o pipefail
err=0

xmodmap ~/.xmodmaprc || err=1
xset r rate 250 40 || err=1
setxkbmap -model acer_laptop -rules evdev\
	-layout 'us,ru' -option 'grp:switch,grp:caps_toggle,grp_led:caps' || err=1

dev='PS/2 Logitech Wheel Mouse'
xinput list "$dev" &>/dev/null && {
	xinput set-prop "$dev" --type=float 257 9999999 || err=1
	xinput set-prop "$dev" --type=float 256 50 || err=1
} ||:

synclient -l &>/dev/null && {
	awk 'match($2,/"/) && NF==3 && $1=="Option" {gsub(/"/,"",$2); gsub(/"/,"",$3); print $2 "=" $3}'\
		/usr/share/X11/xorg.conf.d/50-synaptics.conf | xargs synclient || err=1
}

exit "$err"
